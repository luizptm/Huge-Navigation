!function(){function ajax_get(url,callback){xmlhttp=new XMLHttpRequest,xmlhttp.onreadystatechange=function(){if(4===xmlhttp.readyState&&200===xmlhttp.status)try{var data=JSON.parse(xmlhttp.responseText);callback(data)}catch(err){return void console.log(err.message+" in "+xmlhttp.responseText)}},xmlhttp.open("GET",url,!0),xmlhttp.send()}function createNavigation(items){var menu="",i=0;if(void 0===items||0===items.length)return menu;for(;i<items.length;){var item=items[i],childItems=item&&item.items&&item.items.length,li='<li class="nav-item">';void 0!==item&&(li+="<a "+(childItems?"":'href="'+item.url+'"')+">",""!==item.label&&(li+='<span class="nav-item-text">'+item.label+"</span>"),childItems&&(li+='<span class="nav-item-icon"></span>',li+=createNavigation(item.items)),li+="</a>"),menu+=li,i++}return'<ul class="nav">'+menu+"</ul>"}function toogleSubItem(){var oldItem=document.getElementsByClassName("nav-item open")[0];oldItem&&removeClass(oldItem,"open"),this&&oldItem!==this&&(this.className+=" open"),navBarIsOpened()||!hasSubItemOpened()||overlayIsAppearing()||showOverlay(),navBarIsOpened()||hasSubItemOpened()||!overlayIsAppearing()||hideOverlay()}function hasSubItemOpened(){return document.getElementsByClassName("nav-item open").length}function openNavBar(){navBarIsOpened()||(showHideOverlay(),removeClass(toogleButton,"open"),toogleButton.className+=" close",navbar.className+=" open",logo.className+=" show")}function closeNavBar(){navBarIsOpened()&&(showHideOverlay(),removeClass(toogleButton,"close"),toogleButton.className+=" open",removeClass(navbar,"open"),removeClass(logo,"show"))}function navBarIsOpened(){return navbar.className.indexOf("open")>=0}function overlayIsAppearing(){return overlay.className.indexOf("hide")<0}function showHideOverlay(){overlay.className.indexOf("hide")>0?(removeClass(overlay,"hide"),document.body.style.overflowY="hidden"):(overlay.className+=" hide",document.body.style.overflowY="initial")}function removeClass(element,className){var classArray=element.className.split(" "),index=classArray.indexOf(className);classArray.splice(index,1),element.className=classArray.toString()}var logo=document.getElementsByClassName("logo")[0],toogleButton=document.getElementsByClassName("toogle")[0],navbar=document.getElementsByClassName("nav-bar")[0];toogleButton&&void 0!==toogleButton&&toogleButton.addEventListener("click",function(){navBarIsOpened()?closeNavBar():openNavBar()});var overlay=document.getElementsByClassName("overlay")[0];overlay&&void 0!==overlay&&overlay.addEventListener("click",function(){navBarIsOpened()?closeNavBar():toogleSubItem()}),ajax_get("./api/nav.json",function(data){var navigation=createNavigation(data.items);navbar.insertAdjacentHTML("afterbegin",'<a class="logo"><img src="/images/HUGE-white.png" alt="HUGE"/></a>'+navigation);for(var items=document.getElementsByClassName("nav-item"),count=0;count<items.length;count++)items.item(count).childNodes.length>1&&items.item(count).addEventListener("click",toogleSubItem);var countLinks=navbar.getElementsByTagName("a");for(count=0;count<countLinks.length;count++)countLinks[count].hasChildNodes()||(countLinks[count].parentElement.removeChild(countLinks[count]),countLinks[count].parentElement.removeChild(countLinks[count]))})}();